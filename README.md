# earthly-staging
This repo contains pre-released binaries of earthly.

Visit [github.com/earthly/earthly](https://github.com/earthly/earthly) for the main earthly repository.

## pre-release binary build details

This repository contains various branches named `pre-release-v0.<seconds-since-epoch>.<short-git-sha-in-decimal>`, which are automatically
generated by a [GitHub Actions script](https://github.com/earthly/earthly/blob/main/.github/workflows/ci-staging-deploy.yml) in the 
[github.com/earthly/earthly](https://github.com/earthly/earthly) repository that is triggered on each run.

That script additionally creates a new branch in the [github.com/earthly/homebrew-earthly-staging](https://github.com/earthly/homebrew-earthly-staging) repository
which triggers a homebrew package to be built for MacOS users.

### converting decinal git-sha back to hex git-sha

To keep our versioning in a semver format we had to encode the git sha as decimal rather than hex.
For example git sha `55237e9b71c8c9032fe6bb167cc32042cf8da4cd` is equivalent to `55237e9b` (when using `git rev-parse --short HEAD`);
The short value is converted to decimal `1428389531` (by running `echo "ibase=16; $(git rev-parse --short HEAD | tr '[:lower:]' '[:upper:]')" | bc`).
This `<short-git-sha-in-decimal>` value is encoded as the patch-field (last-field) of the semver.

To convert the decimal value back to hex, run the following on your terminal:

    printf '%x\n' 1428389531
